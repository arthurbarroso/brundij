{"version":3,"sources":["spec_tools/json_schema.cljc"],"mappings":"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","names":["spec-tools.json-schema/only-entry?","key","a-map","cljs.core._EQ_","cljs.core/keys","spec-tools.json-schema/simplify-all-of","spec","subspecs","cljs.core.remove","cljs.core/empty?","cljs.core.dissoc","cljs.core/count","cljs.core/first","cljs.core.assoc","spec-tools.json-schema/spec-dispatch","dispatch","_","js/spec-tools","js/spec-tools.json-schema","js/spec-tools.json-schema.accept-spec","method-table__4701__auto__","cljs.core.atom","prefer-table__4702__auto__","method-cache__4703__auto__","cached-hierarchy__4704__auto__","hierarchy__4705__auto__","cljs.core.get","fexpr__78973","cljs.core/MultiFn","cljs.core.symbol","spec-tools.json-schema/accept-spec","var_args","G__78978","spec-tools.json-schema/transform","js/Error","spec_tools.json_schema.transform","options","spec_tools.visitor.visit","children","spec-tools.json-schema/maybe-with-title","schema","temp__5733__auto__","title","and__4210__auto__","infer-titles?","spec-tools.core/spec-name","spec-tools.impl/qualified-name","map__78997","cljs.core/--destructure-map","req","req-un","opt","opt-un","spec-tools.impl/parse-keys","spec-tools.impl/extract-form","names-un","cljs.core.map","cljs.core/name","cljs.core.concat","names","required","required-un","all-required","cljs.core/not-empty","cljs.core.merge","cljs.core/zipmap","cljs.core/vec","spec-tools.json-schema/accept-merge","cljs.core.mapcat","cljs.core.reduce","cljs.core/merge","cljs.core/into","cljs.core/sorted-set","cljs.core.into","map__79013","form","type","spec-tools.parse/parse-spec","G__79014","cljs.core/Keyword","spec-tools.impl/unwrap","cljs.core/second","vec__79037","cljs.core.nth","minimum","maximum","spec-tools.impl/strip-fn-if-needed","vec__79041","data","name","synthetic?","spec-tools.core/get-spec","json-schema-meta","spec-tools.impl/unlift-keys","extra-info","cljs.core/select-keys","G__79045","cljs.core/not","or__4212__auto__"],"sourcesContent":["(ns spec-tools.json-schema\n  \"Tools for converting specs into JSON Schemata. The version of JSON-Schema\n  generated is [draft-04](https://json-schema.org/specification-links.html#draft-4).\"\n  (:require [spec-tools.visitor :as visitor]\n            [spec-tools.parse :as parse]\n            [spec-tools.impl :as impl]\n            [spec-tools.core :as st]))\n\n(defn- only-entry? [key a-map] (= [key] (keys a-map)))\n\n(defn- simplify-all-of [spec]\n  (let [subspecs (->> (:allOf spec) (remove empty?))]\n    (cond\n      (empty? subspecs) (dissoc spec :allOf)\n      (and (= (count subspecs) 1) (only-entry? :allOf spec)) (first subspecs)\n      :else (assoc spec :allOf subspecs))))\n\n(defn- spec-dispatch [dispatch _ _ _] dispatch)\n\n(defmulti accept-spec spec-dispatch :default ::default)\n\n(defn transform\n  ([spec]\n   (transform spec nil))\n  ([spec options]\n   (visitor/visit spec accept-spec options)))\n\n;;\n;; predicate list taken from https://github.com/clojure/clojure/blob/master/src/clj/clojure/spec/gen.clj\n;;\n\n; any? (one-of [(return nil) (any-printable)])\n(defmethod accept-spec 'clojure.core/any? [_ _ _ _] {})\n\n; some? (such-that some? (any-printable))\n(defmethod accept-spec 'clojure.core/some? [_ _ _ _] {})\n\n; number? (one-of [(large-integer) (double)])\n(defmethod accept-spec 'clojure.core/number? [_ _ _ _] {:type \"number\" :format \"double\"})\n\n(defmethod accept-spec 'clojure.core/pos? [_ _ _ _] {:minimum 0 :exclusiveMinimum true})\n\n(defmethod accept-spec 'clojure.core/neg? [_ _ _ _] {:maximum 0 :exclusiveMaximum true})\n\n; integer? (large-integer)\n(defmethod accept-spec 'clojure.core/integer? [_ _ _ _] {:type \"integer\"})\n\n; int? (large-integer)\n(defmethod accept-spec 'clojure.core/int? [_ _ _ _] {:type \"integer\" :format \"int64\"})\n\n; pos-int? (large-integer* {:min 1})\n(defmethod accept-spec 'clojure.core/pos-int? [_ _ _ _] {:type \"integer\", :format \"int64\", :minimum 1})\n\n; neg-int? (large-integer* {:max -1})\n(defmethod accept-spec 'clojure.core/neg-int? [_ _ _ _] {:type \"integer\", :format \"int64\", :maximum -1})\n\n; nat-int? (large-integer* {:min 0})\n(defmethod accept-spec 'clojure.core/nat-int? [_ _ _ _] {:type \"integer\", :format \"int64\" :minimum 0})\n\n; float? (double)\n(defmethod accept-spec 'clojure.core/float? [_ _ _ _] {:type \"number\"})\n\n; double? (double)\n(defmethod accept-spec 'clojure.core/double? [_ _ _ _] {:type \"number\"})\n\n; boolean? (boolean)\n(defmethod accept-spec 'clojure.core/boolean? [_ _ _ _] {:type \"boolean\"})\n\n; string? (string-alphanumeric)\n(defmethod accept-spec 'clojure.core/string? [_ _ _ _] {:type \"string\"})\n\n; ident? (one-of [(keyword-ns) (symbol-ns)])\n(defmethod accept-spec 'clojure.core/ident? [_ _ _ _] {:type \"string\"})\n\n; simple-ident? (one-of [(keyword) (symbol)])\n(defmethod accept-spec 'clojure.core/simple-ident? [_ _ _ _] {:type \"string\"})\n\n; qualified-ident? (such-that qualified? (one-of [(keyword-ns) (symbol-ns)]))\n(defmethod accept-spec 'clojure.core/qualified-ident? [_ _ _ _] {:type \"string\"})\n\n; keyword? (keyword-ns)\n(defmethod accept-spec 'clojure.core/keyword? [_ _ _ _] {:type \"string\"})\n\n; simple-keyword? (keyword)\n(defmethod accept-spec 'clojure.core/simple-keyword? [_ _ _ _] {:type \"string\"})\n\n; qualified-keyword? (such-that qualified? (keyword-ns))\n(defmethod accept-spec 'clojure.core/qualified-keyword? [_ _ _ _] {:type \"string\"})\n\n; symbol? (symbol-ns)\n(defmethod accept-spec 'clojure.core/symbol? [_ _ _ _] {:type \"string\"})\n\n; simple-symbol? (symbol)\n(defmethod accept-spec 'clojure.core/simple-symbol? [_ _ _ _] {:type \"string\"})\n\n; qualified-symbol? (such-that qualified? (symbol-ns))\n(defmethod accept-spec 'clojure.core/qualified-symbol? [_ _ _ _] {:type \"string\"})\n\n; uuid? (uuid)\n(defmethod accept-spec 'clojure.core/uuid? [_ _ _ _] {:type \"string\" :format \"uuid\"})\n\n; uri? (fmap #(java.net.URI/create (str \"http://\" % \".com\")) (uuid))\n(defmethod accept-spec 'clojure.core/uri? [_ _ _ _] {:type \"string\" :format \"uri\"})\n\n; bigdec? (fmap #(BigDecimal/valueOf %)\n;               (double* {:infinite? false :NaN? false}))\n(defmethod accept-spec 'clojure.core/decimal? [_ _ _ _] {:type \"number\" :format \"double\"})\n\n; inst? (fmap #(java.util.Date. %)\n;             (large-integer))\n(defmethod accept-spec 'clojure.core/inst? [_ _ _ _] {:type \"string\" :format \"date-time\"})\n\n; seqable? (one-of [(return nil)\n;                   (list simple)\n;                   (vector simple)\n;                   (map simple simple)\n;                   (set simple)\n;                   (string-alphanumeric)])\n(defmethod accept-spec 'clojure.core/seqable? [_ _ _ _] {:type \"array\"})\n\n; indexed? (vector simple)\n(defmethod accept-spec 'clojure.core/map? [_ _ _ _] {:type \"array\"})\n\n; map? (map simple simple)\n(defmethod accept-spec 'clojure.core/map? [_ _ _ _] {:type \"object\"})\n\n; vector? (vector simple)\n(defmethod accept-spec 'clojure.core/vector? [_ _ _ _] {:type \"array\"})\n\n; list? (list simple)\n(defmethod accept-spec 'clojure.core/list? [_ _ _ _] {:type \"array\"})\n\n; seq? (list simple)\n(defmethod accept-spec 'clojure.core/seq? [_ _ _ _] {:type \"array\"})\n\n; char? (char)\n(defmethod accept-spec 'clojure.core/char? [_ _ _ _] {:type \"string\"})\n\n; set? (set simple)\n(defmethod accept-spec 'clojure.core/set? [_ _ _ _] {:type \"array\" :uniqueItems true})\n\n; nil? (return nil)\n(defmethod accept-spec 'clojure.core/nil? [_ _ _ _] {:type \"null\"})\n\n; false? (return false)\n(defmethod accept-spec 'clojure.core/false? [_ _ _ _] {:type \"boolean\"})\n\n; true? (return true)\n(defmethod accept-spec 'clojure.core/true? [_ _ _ _] {:type \"boolean\"})\n\n; zero? (return 0)\n(defmethod accept-spec 'clojure.core/zero? [_ _ _ _] {:type \"integer\"})\n\n; rational? (one-of [(large-integer) (ratio)])\n#?(:clj (defmethod accept-spec 'clojure.core/rational? [_ _ _ _] {:type \"double\"}))\n\n; coll? (one-of [(map simple simple)\n;                (list simple)\n;                (vector simple)\n;                (set simple)])\n(defmethod accept-spec 'clojure.core/coll? [_ _ _ _] {:type \"object\"})\n\n; empty? (elements [nil '() [] {} #{}])\n(defmethod accept-spec 'clojure.core/empty? [_ _ _ _] {:type \"array\" :maxItems 0 :minItems 0})\n\n; associative? (one-of [(map simple simple) (vector simple)])\n(defmethod accept-spec 'clojure.core/associative? [_ _ _ _] {:type \"object\"})\n\n; sequential? (one-of [(list simple) (vector simple)])\n(defmethod accept-spec 'clojure.core/sequential? [_ _ _ _] {:type \"array\"})\n\n; ratio? (such-that ratio? (ratio))\n(defmethod accept-spec 'clojure.core/ratio? [_ _ _ _] {:type \"integer\"})\n\n; bytes? (bytes)\n(defmethod accept-spec 'clojure.core/bytes? [_ _ _ _] {:type \"string\" :format \"byte\"})\n\n(defmethod accept-spec ::visitor/set [dispatch spec children _]\n  {:enum children})\n\n(defn- maybe-with-title [schema spec options]\n  (letfn [(infer-titles? [options] (-> options :infer-titles false? not))]\n    (if-let [title (and (infer-titles? options) (st/spec-name spec))]\n      (assoc schema :title (impl/qualified-name title))\n      schema)))\n\n(defmethod accept-spec 'clojure.spec.alpha/keys [_ spec children options]\n  (let [{:keys [req req-un opt opt-un]} (impl/parse-keys (impl/extract-form spec))\n        names-un (map name (concat req-un opt-un))\n        names (map impl/qualified-name (concat req opt))\n        required (map impl/qualified-name req)\n        required-un (map name req-un)\n        all-required (not-empty (concat required required-un))]\n    (maybe-with-title\n      (merge\n        {:type \"object\"\n         :properties (zipmap (concat names names-un) children)}\n        (when all-required\n          {:required (vec all-required)}))\n      spec\n      options)))\n\n(defmethod accept-spec 'clojure.spec.alpha/or [_ _ children _]\n  {:anyOf children})\n\n(defmethod accept-spec 'clojure.spec.alpha/and [_ _ children _]\n  (simplify-all-of {:allOf children}))\n\n(defn- accept-merge [children spec options]\n  (maybe-with-title\n    {:type \"object\"\n     :properties (->> (concat children\n                              (mapcat :anyOf children)\n                              (mapcat :allOf children))\n                      (map :properties)\n                      (reduce merge {}))\n     :required (->> (concat children\n                            (mapcat :allOf children))\n                    (map :required)\n                    (reduce into (sorted-set))\n                    (into []))}\n    spec\n    options))\n\n(defmethod accept-spec 'clojure.spec.alpha/merge [_ spec children options]\n  (accept-merge children spec options))\n\n(defmethod accept-spec 'spec-tools.core/merge [_ spec children options]\n  (accept-merge children spec options))\n\n(defmethod accept-spec 'clojure.spec.alpha/every [_ spec children options]\n  (let [form (impl/extract-form spec)\n        {:keys [type]} (parse/parse-spec form)]\n    (case type\n      :map (maybe-with-title {:type \"object\", :additionalProperties (impl/unwrap children)} spec options)\n      :set {:type \"array\", :uniqueItems true, :items (impl/unwrap children)}\n      :vector {:type \"array\", :items (impl/unwrap children)})))\n\n(defmethod accept-spec 'clojure.spec.alpha/every-kv [_ spec children options]\n  (maybe-with-title {:type \"object\", :additionalProperties (second children)} spec options))\n\n(defmethod accept-spec ::visitor/map-of [_ spec children options]\n  (maybe-with-title {:type \"object\", :additionalProperties (second children)} spec options))\n\n(defmethod accept-spec ::visitor/set-of [_ _ children _]\n  {:type \"array\", :items (impl/unwrap children), :uniqueItems true})\n\n(defmethod accept-spec ::visitor/vector-of [_ _ children _]\n  {:type \"array\", :items (impl/unwrap children)})\n\n(defmethod accept-spec 'clojure.spec.alpha/* [_ _ children _]\n  {:type \"array\" :items (impl/unwrap children)})\n\n(defmethod accept-spec 'clojure.spec.alpha/+ [_ _ children _]\n  {:type \"array\" :items (impl/unwrap children) :minItems 1})\n\n(defmethod accept-spec 'clojure.spec.alpha/? [_ _ children _]\n  {:type \"array\" :items (impl/unwrap children) :minItems 0})\n\n(defmethod accept-spec 'clojure.spec.alpha/alt [_ spec children options]\n  (maybe-with-title\n    {:anyOf children}\n    spec\n    options))\n\n(defmethod accept-spec 'clojure.spec.alpha/cat [_ spec children options]\n  (maybe-with-title\n    {:type \"array\"\n     :items {:anyOf children}}\n    spec\n    options))\n\n; &\n\n(defmethod accept-spec 'clojure.spec.alpha/tuple [_ _ children _]\n  {:type \"array\"\n   :items children})\n\n; keys*\n\n(defmethod accept-spec 'clojure.spec.alpha/nilable [_ _ children _]\n  {:oneOf [(impl/unwrap children) {:type \"null\"}]})\n\n;; this is just a function in clojure.spec?\n(defmethod accept-spec 'clojure.spec.alpha/int-in-range? [_ spec _ _]\n  (let [[_ minimum maximum _] (impl/strip-fn-if-needed spec)]\n    {:minimum minimum :maximum maximum}))\n\n(defmethod accept-spec ::visitor/spec [_ spec children _]\n  (let [[_ data] (impl/extract-form spec)\n        name (st/spec-name spec)\n        synthetic? (-> spec st/get-spec ::st/synthetic?)\n        json-schema-meta (impl/unlift-keys data \"json-schema\")\n        extra-info (-> (select-keys data [:description])\n                       (cond-> (and name (not synthetic?))\n                               (assoc :title (impl/qualified-name name))))]\n    (or (:json-schema data)\n        (merge (impl/unwrap children) extra-info json-schema-meta))))\n\n(defmethod accept-spec ::default [_ _ _ _]\n  {})\n"]}