{"version":3,"sources":["brundij/views/answers/create.cljs"],"mappings":"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","names":["brundij.views.answers.create/question-link-base","brundij.views.answers.create/question-link-styles","possible?","cljs.core.merge","brundij.views.answers.create/option-base","brundij.views.answers.create/option-styles","current-rating","option","cljs.core._EQ_","brundij.views.answers.create/trend-styles","current-trend","trend","brundij.views.answers.create/options","brundij.views.answers.create/trend-options","brundij.views.answers.create/parse-questions-for-handler","questions","cljs.core.map","q","brundij.views.answers.create/create-answers","cljs.core/deref","re_frame.core.subscribe","max-index","cljs.core/count","current-index","brundij.components.template/template","stylefy.core.use_style","re-frame.core/dispatch","cljs.core.nth","cljs.core.doall","iter__4611__auto__","s__72451","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4609__auto__","size__4610__auto__","b__72453","cljs.core/chunk-buffer","i__72452","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__72450","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","s__72455","b__72457","i__72456","iter__72454","brundij.components.button/button","cljs.core/chunk-first"],"sourcesContent":["(ns brundij.views.answers.create\n  (:require [brundij.components.button :refer [button]]\n            [brundij.components.template :refer [template]]\n            [brundij.events :as events]\n            [brundij.views.answers.events :as aevts]\n            [brundij.views.answers.subs :as subs]\n            [re-frame.core :as re-frame]\n            [stylefy.core :as stylefy :refer [use-style]]))\n\n(def question-link-base {:color \"#333\"})\n\n(defn question-link-styles [possible?]\n  (if (true? possible?)\n    (merge question-link-base {:cursor \"pointer\"})\n    (merge question-link-base {:color \"#ccc\"})))\n\n(def option-base\n  {:cursor \"pointer\"\n   :font-size \"1.5rem\"\n   :background \"none\"\n   :padding 0\n   :border \"none\"})\n\n(defn option-styles [current-rating option]\n  (if (= current-rating option)\n    (merge option-base\n           {:border \"1px solid red\"\n            :border-radius \"50%\"})\n    option-base))\n\n(defn trend-styles [current-trend trend]\n  (if (= current-trend trend)\n    (merge option-base {:border \"1px solid red\"})\n    option-base))\n\n(def options [{:rating 1\n               :symbol \"\ud83d\udd34\"\n               :title \"Bad\"}\n              {:rating 2\n               :symbol \"\ud83d\udfe1\"\n               :title \"Ok\"}\n              {:rating 3\n               :symbol \"\ud83d\udfe2\"\n               :title \"Good\"}])\n\n(def trend-options [{:symbol \"\u2b07\ufe0f\"\n                     :title \"Trending down\"\n                     :trend \"down\"}\n                    {:symbol \"\u27a1\ufe0f\"\n                     :title \"Stable\"\n                     :trend \"stable\"}\n                    {:symbol \"\u2b06\ufe0f\"\n                     :title \"Trending up\"\n                     :trend \"up\"}])\n\n(defn parse-questions-for-handler [questions]\n  (map (fn [q] {:question-id (:uuid q) :rating (:rating q) :trend (:trend q)}) questions))\n\n(defn create-answers []\n  (let [questions @(re-frame/subscribe [::subs/pre-existing-questions])\n        max-index (count questions)\n        current-index @(re-frame/subscribe [::subs/current-question-index])]\n    (if (= 0 (count questions))\n      [template\n       [:h3 (use-style {:font-size \"3rem\" :margin 0})\n        \"Looks like either the selected health check has no questions \n         or there is no health check selected at all \ud83d\udc1b\"]\n       [:p\n        (use-style {:cursor \"pointer\"}\n                   {:on-click #(re-frame/dispatch [::events/navigate :home])})\n        \"Go back to home page\"]]\n      [template\n       [:h3 (use-style {:font-size \"3rem\" :margin 0})\n        \"Answering health check questions \ud83e\udd5d\"]\n       [:h4 (str \"Question/topic: \" (:content (nth questions current-index)))]\n       [:p \"Your rating:\"]\n       [:div (use-style {:display \"flex\" :align-items \"center\"\n                         :justify-content \"space-between\"\n                         :max-width \"40%\"})\n        (doall\n          (for [option options]\n            ^{:key (str (:rating option) \"-\"\n                        (:uuid (nth questions current-index)) \"-\"\n                        current-index)}\n            [:button (use-style\n                       (option-styles\n                         (:rating (nth questions current-index))\n                         (:rating option))\n                       {:title (:title option)\n                        :on-click\n                          #(re-frame/dispatch\n                             [::aevts/update-question-rating-at-index\n                              {:rating (:rating option)\n                               :index current-index}])})\n             [:p (use-style {:margin 0}) (:symbol option)]]))]\n       [:p \"The trend for this rating:\"]\n       [:div (use-style {:display \"flex\"\n                         :align-items \"center\"\n                         :justify-content \"space-between\"\n                         :max-width \"40%\"})\n        (doall\n          (for [trend trend-options]\n            ^{:key (str (:title trend) \"-\"\n                        (:uuid (nth questions current-index)) \"-\"\n                        current-index)}\n            [:button\n             (use-style\n               (trend-styles (:trend (nth questions current-index))\n                             (:trend trend))\n               {:title (:title trend)\n                :on-click #(re-frame/dispatch\n                             [::aevts/update-question-trend-at-index\n                              {:trend (:trend trend)\n                               :index current-index}])})\n             (:symbol trend)]))]\n       [:div (use-style {:display \"flex\"\n                         :align-items \"center\"\n                         :max-width \"40%\"\n                         :justify-content \"space-between\"})\n        [:p\n         (use-style\n           (question-link-styles (> current-index 0))\n           {:on-click #(when (> current-index 0)\n                         (re-frame/dispatch\n                           [::aevts/decrement-current-question-index]))})\n         \"Prior question\"]\n        [:p\n         (use-style\n           (question-link-styles (< current-index max-index))\n           {:on-click #(when (< current-index max-index)\n                         (re-frame/dispatch\n                           [::aevts/increment-current-question-index]))})\n         \"Next question\"]]\n       [button {:on-click\n                  #(re-frame/dispatch\n                     [::aevts/create-answers\n                      (parse-questions-for-handler questions)])\n                :text \"Submit answers\"\n                :extra-styles {:max-width \"40%\"\n                               :color \"#333\"}}]])))\n"]}