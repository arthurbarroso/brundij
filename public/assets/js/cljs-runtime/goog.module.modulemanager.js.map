{
"version":3,
"file":"goog.module.modulemanager.js",
"lineCount":590,
"mappings":"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",
"sources":["goog/module/modulemanager.js"],
"sourcesContent":["/**\n * @license\n * Copyright The Closure Library Authors.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A default implementation for managing JavaScript code modules.\n * @enhanceable\n */\n\ngoog.provide('goog.module.ModuleManager');\ngoog.provide('goog.module.ModuleManager.CallbackType');\ngoog.provide('goog.module.ModuleManager.FailureType');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.async.Deferred');\ngoog.require('goog.debug.Error');\ngoog.require('goog.debug.Trace');\ngoog.require('goog.disposable.IDisposable');\ngoog.require('goog.disposeAll');\ngoog.require('goog.loader.AbstractModuleManager');\ngoog.require('goog.loader.activeModuleManager');\ngoog.require('goog.log');\n/** @suppress {extraRequire} */\ngoog.require('goog.module');\ngoog.require('goog.module.ModuleInfo');\ngoog.require('goog.module.ModuleLoadCallback');\ngoog.require('goog.module.ModuleLoadFailureType');\ngoog.require('goog.object');\ngoog.requireType('goog.module.AbstractModuleLoader');\n\n\n/**\n * The ModuleManager keeps track of all modules in the environment.\n * Since modules may not have their code loaded, we must keep track of them.\n * @constructor\n * @extends {goog.loader.AbstractModuleManager}\n * @implements {goog.disposable.IDisposable}\n * @struct\n */\ngoog.module.ModuleManager = function() {\n  'use strict';\n  goog.module.ModuleManager.base(this, 'constructor');\n\n  /**\n   * A mapping from module id to ModuleInfo object.\n   * @protected {!Object<string, !goog.module.ModuleInfo>}\n   */\n  this.moduleInfoMap = {};\n\n  // TODO (malteubl): Switch this to a reentrant design.\n  /**\n   * The ids of the currently loading modules. If batch mode is disabled, then\n   * this array will never contain more than one element at a time.\n   * @type {!Array<string>}\n   * @private\n   */\n  this.loadingModuleIds_ = [];\n\n  /**\n   * The requested ids of the currently loading modules. This does not include\n   * module dependencies that may also be loading.\n   * @type {!Array<string>}\n   * @private\n   */\n  this.requestedLoadingModuleIds_ = [];\n\n  // TODO(malteubl): Make these and other arrays that are used as sets be\n  // actual sets.\n  /**\n   * All module ids that have ever been requested. In concurrent loading these\n   * are the ones to subtract from future requests.\n   * @type {!Array<string>}\n   * @private\n   */\n  this.requestedModuleIds_ = [];\n\n  /**\n   * A queue of the ids of requested but not-yet-loaded modules. The zero\n   * position is the front of the queue. This is a 2-D array to group modules\n   * together with other modules that should be batch loaded with them, if\n   * batch loading is enabled.\n   * @type {!Array<!Array<string>>}\n   * @private\n   */\n  this.requestedModuleIdsQueue_ = [];\n\n  /**\n   * The ids of the currently loading modules which have been initiated by user\n   * actions.\n   * @type {!Array<string>}\n   * @private\n   */\n  this.userInitiatedLoadingModuleIds_ = [];\n\n  /**\n   * @private @const {!goog.module.AbstractModuleLoader.ExtraEdgesMap} Map of\n   *     extra edges to traverse in the module graph\n   */\n  this.extraEdges_ = {};\n\n  /**\n   * A map of callback types to the functions to call for the specified\n   * callback type.\n   * @type {!Object<!goog.loader.AbstractModuleManager.CallbackType,\n   *     !Array<!Function>>}\n   * @private\n   */\n  this.callbackMap_ = {};\n\n  /**\n   * Module info for the base module (the one that contains the module\n   * manager code), which we set as the loading module so one can\n   * register initialization callbacks in the base module.\n   *\n   * The base module is considered loaded when #setAllModuleInfo is called or\n   * #setModuleContext is called, whichever comes first.\n   *\n   * @type {!goog.module.ModuleInfo}\n   * @private\n   */\n  this.baseModuleInfo_ = new goog.module.ModuleInfo([], '');\n\n  /**\n   * The module that is currently loading, or null if not loading anything.\n   * @type {?goog.module.ModuleInfo}\n   * @private\n   */\n  this.currentlyLoadingModule_ = this.baseModuleInfo_;\n\n  /**\n   * The id of the last requested initial module. When it loaded\n   * the deferred in `this.initialModulesLoaded_` resolves.\n   * @private {?string}\n   */\n  this.lastInitialModuleId_ = null;\n\n  /**\n   * Deferred for when all initial modules have loaded. We currently block\n   * sending additional module requests until this deferred resolves. In a\n   * future optimization it may be possible to use the initial modules as\n   * seeds for the module loader \"requested module ids\" and start making new\n   * requests even sooner.\n   * @private {!goog.async.Deferred}\n   */\n  this.initialModulesLoaded_ = new goog.async.Deferred();\n\n  /**\n   * A logger.\n   * @private {?goog.log.Logger}\n   */\n  this.logger_ = goog.log.getLogger('goog.module.ModuleManager');\n\n  /**\n   * Whether the batch mode (i.e. the loading of multiple modules with just one\n   * request) has been enabled.\n   * @private {boolean}\n   */\n  this.batchModeEnabled_ = false;\n\n  /**\n   * Whether the module requests may be sent out of order.\n   * @private {boolean}\n   */\n  this.concurrentLoadingEnabled_ = false;\n\n  // TODO(user): Remove tracer.\n  /**\n   * Tracer that measures how long it takes to load a module.\n   * @private {?number}\n   */\n  this.loadTracer_ = null;\n\n  /**\n   * The number of consecutive failures that have happened upon module load\n   * requests.\n   * @private {number}\n   */\n  this.consecutiveFailures_ = 0;\n\n  /**\n   * Determines if the module manager was just active before the processing of\n   * the last data.\n   * @private {boolean}\n   */\n  this.lastActive_ = false;\n\n  /**\n   * Determines if the module manager was just user active before the processing\n   * of the last data. The module manager is user active if any of the\n   * user-initiated modules are loading or queued up to load.\n   * @private {boolean}\n   */\n  this.userLastActive_ = false;\n\n  /**\n   * @private {boolean}\n   */\n  this.isDisposed_ = false;\n};\ngoog.inherits(goog.module.ModuleManager, goog.loader.AbstractModuleManager);\n\n\n/**\n * Error used to indicate a module has failed.\n *\n * @param {string} moduleID The id of the module that didn't load.\n * @param {?goog.loader.AbstractModuleManager.FailureType} failureType\n * @constructor\n * @extends {goog.debug.Error}\n * @final\n */\ngoog.module.ModuleManager.ModuleFailureError = function(moduleID, failureType) {\n  'use strict';\n  /** @type {string} */\n  const msg = `Error loading ${moduleID}: ${\n      goog.module.ModuleLoadFailureType.getReadableError(failureType)}`;\n\n  goog.module.ModuleManager.ModuleFailureError.base(this, 'constructor', msg);\n\n  /** @type {?goog.loader.AbstractModuleManager.FailureType} */\n  this.failureType = failureType;\n};\ngoog.inherits(goog.module.ModuleManager.ModuleFailureError, goog.debug.Error);\n\n\n/**\n * The type of callbacks that can be registered with the module manager,.\n * @enum {string}\n */\ngoog.module.ModuleManager.CallbackType =\n    goog.loader.AbstractModuleManager.CallbackType;\n\n\n/**\n * The possible reasons for a module load failure callback being fired.\n * @enum {number}\n */\ngoog.module.ModuleManager.FailureType = goog.module.ModuleLoadFailureType;\n\n\n/**\n * A non-HTTP status code indicating a corruption in loaded module.\n * This should be used by a ModuleLoader as a replacement for the HTTP code\n * given to the error handler function to indicated that the module was\n * corrupted.\n * This will set the forceReload flag on the loadModules method when retrying\n * module loading.\n * @type {number}\n */\ngoog.module.ModuleManager.CORRUPT_RESPONSE_STATUS_CODE =\n    goog.loader.AbstractModuleManager.CORRUPT_RESPONSE_STATUS_CODE;\n\n\n/** @return {!goog.loader.AbstractModuleManager} */\ngoog.module.ModuleManager.getInstance = function() {\n  'use strict';\n  return goog.loader.activeModuleManager.get();\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setBatchModeEnabled = function(enabled) {\n  'use strict';\n  this.batchModeEnabled_ = enabled;\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setConcurrentLoadingEnabled = function(\n    enabled) {\n  'use strict';\n  this.concurrentLoadingEnabled_ = enabled;\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setAllModuleInfo = function(infoMap) {\n  'use strict';\n  for (var id in infoMap) {\n    this.addOrUpdateModuleInfo_(id, infoMap[id]);\n  }\n  if (!this.initialModulesLoaded_.hasFired()) {\n    this.initialModulesLoaded_.callback();\n  }\n  this.maybeFinishBaseLoad_();\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setAllModuleInfoString = function(\n    opt_info, opt_loadingModuleIds) {\n  'use strict';\n  // Check for legacy direct-from-prototype usage.\n  if (!(this instanceof goog.module.ModuleManager)) {\n    this.setAllModuleInfoString(opt_info, opt_loadingModuleIds);\n    return;\n  }\n  if (typeof (opt_info) !== 'string') {\n    // The call to this method is generated in two steps, the argument is added\n    // after some of the compilation passes.  This means that the initial code\n    // doesn't have any arguments and causes compiler errors.  We make it\n    // optional to satisfy this constraint.\n    return;\n  }\n\n  var modules = opt_info.split('/');\n  var moduleIds = [];\n\n  // Split the string into the infoMap of id->deps\n  for (var i = 0; i < modules.length; i++) {\n    var parts = modules[i].split(':');\n    var id = parts[0];\n    var deps;\n    if (parts[1]) {\n      deps = parts[1].split(',');\n      for (var j = 0; j < deps.length; j++) {\n        var index = parseInt(deps[j], 36);\n        goog.asserts.assert(\n            moduleIds[index], 'No module @ %s, dep of %s @ %s', index, id, i);\n        deps[j] = moduleIds[index];\n      }\n    } else {\n      deps = [];\n    }\n    moduleIds.push(id);\n    this.addOrUpdateModuleInfo_(id, deps);\n  }\n  if (opt_loadingModuleIds && opt_loadingModuleIds.length) {\n    goog.array.extend(this.loadingModuleIds_, opt_loadingModuleIds);\n    // The last module in the list of initial modules. When it has loaded all\n    // initial modules have loaded.\n    this.lastInitialModuleId_ =\n        /** @type {?string}  */ (goog.array.peek(opt_loadingModuleIds));\n  } else {\n    if (!this.initialModulesLoaded_.hasFired()) {\n      this.initialModulesLoaded_.callback();\n    }\n  }\n  this.maybeFinishBaseLoad_();\n};\n\n/**\n * @define {boolean} Whether subtractive module loading is enabled. The main\n * difference is the module graph is no longer in the client, i.e.,\n * setAllModuleInfoString is never been called. Instead, the module manager\n * will keep track of the already loaded modules, and add them to the subsequent\n * loader requests. The serving system is able to figure out the list of desired\n * modules.\n *\n * The default is false, but new code is encouraged to use this.\n * Search, Gmail, and many Google applications has been using subtractive\n * module loading for years and see significantly performance benefits.\n */\ngoog.module.ModuleManager.SUBTRACTIVE_MODULE_LOADING =\n    goog.define('goog.module.ModuleManager.SUBTRACTIVE_MODULE_LOADING', false);\n\n/** @override */\ngoog.module.ModuleManager.prototype.getModuleInfo = function(id) {\n  'use strict';\n  if (goog.module.ModuleManager.SUBTRACTIVE_MODULE_LOADING &&\n      !(id in this.moduleInfoMap)) {\n    this.moduleInfoMap[id] = new goog.module.ModuleInfo([], id);\n  }\n  return this.moduleInfoMap[id];\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.addExtraEdge = function(\n    fromModule, toModule) {\n  'use strict';\n  if (!this.getLoader().supportsExtraEdges) {\n    throw new Error('Extra edges are not supported by the module loader.');\n  }\n  if (!this.extraEdges_[fromModule]) {\n    this.extraEdges_[fromModule] = {};\n  }\n  this.extraEdges_[fromModule][toModule] = true;\n};\n\n/** @override */\ngoog.module.ModuleManager.prototype.removeExtraEdge = function(\n    fromModule, toModule) {\n  'use strict';\n  if (!this.extraEdges_[fromModule]) {\n    return;\n  }\n  delete this.extraEdges_[fromModule][toModule];\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setModuleTrustedUris = function(\n    moduleUriMap) {\n  'use strict';\n  for (var id in moduleUriMap) {\n    this.moduleInfoMap[id].setTrustedUris(moduleUriMap[id]);\n  }\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setModuleContext = function(context) {\n  'use strict';\n  goog.module.ModuleManager.base(this, 'setModuleContext', context);\n  this.maybeFinishBaseLoad_();\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.isActive = function() {\n  'use strict';\n  return this.loadingModuleIds_.length > 0;\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.isUserActive = function() {\n  'use strict';\n  return this.userInitiatedLoadingModuleIds_.length > 0;\n};\n\n\n/**\n * Dispatches an ACTIVE or IDLE event if necessary.\n * @private\n */\ngoog.module.ModuleManager.prototype.dispatchActiveIdleChangeIfNeeded_ =\n    function() {\n  'use strict';\n  var lastActive = this.lastActive_;\n  var active = this.isActive();\n  if (active != lastActive) {\n    this.executeCallbacks_(\n        active ? goog.loader.AbstractModuleManager.CallbackType.ACTIVE :\n                 goog.loader.AbstractModuleManager.CallbackType.IDLE);\n\n    // Flip the last active value.\n    this.lastActive_ = active;\n  }\n\n  // Check if the module manager is user active i.e., there are user initiated\n  // modules being loaded or queued up to be loaded.\n  var userLastActive = this.userLastActive_;\n  var userActive = this.isUserActive();\n  if (userActive != userLastActive) {\n    this.executeCallbacks_(\n        userActive ?\n            goog.loader.AbstractModuleManager.CallbackType.USER_ACTIVE :\n            goog.loader.AbstractModuleManager.CallbackType.USER_IDLE);\n\n    // Flip the last user active value.\n    this.userLastActive_ = userActive;\n  }\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.preloadModule = function(id, opt_timeout) {\n  'use strict';\n  var d = new goog.async.Deferred();\n  window.setTimeout(\n      goog.bind(this.addLoadModule_, this, id, d), opt_timeout || 0);\n  return d;\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.prefetchModule = function(id) {\n  'use strict';\n  var moduleInfo = this.getModuleInfo(id);\n  if (moduleInfo.isLoaded() || this.isModuleLoading(id)) {\n    throw new Error('Module load already requested: ' + id);\n  } else if (this.batchModeEnabled_) {\n    throw new Error('Modules prefetching is not supported in batch mode');\n  } else {\n    var idWithDeps = this.getNotYetLoadedTransitiveDepIds_(id);\n    for (var i = 0; i < idWithDeps.length; i++) {\n      this.getLoader().prefetchModule(\n          idWithDeps[i], this.moduleInfoMap[idWithDeps[i]]);\n    }\n  }\n};\n\n\n/**\n * Loads a single module for use with a given deferred.\n *\n * @param {string} id The id of the module to load.\n * @param {!goog.async.Deferred} d A deferred object.\n * @private\n */\ngoog.module.ModuleManager.prototype.addLoadModule_ = function(id, d) {\n  'use strict';\n  var moduleInfo = this.getModuleInfo(id);\n  if (moduleInfo.isLoaded()) {\n    d.callback(this.getModuleContext());\n    return;\n  }\n\n  this.registerModuleLoadCallbacks_(id, moduleInfo, false, d);\n  if (!this.isModuleLoading(id)) {\n    this.loadModulesOrEnqueue_([id]);\n  }\n};\n\n\n/**\n * Updates the module info map with either a new ModuleInfo instance or by doing\n * an in-place update of the dependencies to persist the existing loaded state\n * and registered callbacks.\n *\n * @param {string} id\n * @param {!Array<string>} deps\n * @private\n */\ngoog.module.ModuleManager.prototype.addOrUpdateModuleInfo_ = function(\n    id, deps) {\n  'use strict';\n  if (this.moduleInfoMap[id]) {\n    const moduleDeps = this.moduleInfoMap[id].getDependencies();\n    if (moduleDeps != deps) {\n      moduleDeps.splice(0, moduleDeps.length, ...deps);\n    }\n  } else {\n    this.moduleInfoMap[id] = new goog.module.ModuleInfo(deps, id);\n  }\n};\n\n\n/**\n * Loads a list of modules or, if some other module is currently being\n * loaded, appends the ids to the queue of requested module ids. Registers\n * callbacks a module that is currently loading and returns a fired deferred\n * for a module that is already loaded.\n *\n * @param {!Array<string>} ids The id of the module to load.\n * @param {boolean=} opt_userInitiated If the load is a result of a user action.\n * @return {!Object<string, !goog.async.Deferred>} A mapping from id (String)\n *     to deferred objects that will callback or errback when the load for that\n *     id is finished.\n * @private\n */\ngoog.module.ModuleManager.prototype.loadModulesOrEnqueueIfNotLoadedOrLoading_ =\n    function(ids, opt_userInitiated) {\n  'use strict';\n  var uniqueIds = [];\n  goog.array.removeDuplicates(ids, uniqueIds);\n  var idsToLoad = [];\n  var deferredMap = {};\n  for (var i = 0; i < uniqueIds.length; i++) {\n    var id = uniqueIds[i];\n    var moduleInfo = this.getModuleInfo(id);\n    if (!moduleInfo) {\n      throw new Error('Unknown module: ' + id);\n    }\n    var d = new goog.async.Deferred();\n    deferredMap[id] = d;\n    if (moduleInfo.isLoaded()) {\n      d.callback(this.getModuleContext());\n    } else {\n      this.registerModuleLoadCallbacks_(id, moduleInfo, !!opt_userInitiated, d);\n      if (!this.isModuleLoading(id)) {\n        idsToLoad.push(id);\n      }\n    }\n  }\n\n  // If there are ids to load, load them, otherwise, they are all loading or\n  // loaded.\n  if (idsToLoad.length > 0) {\n    this.loadModulesOrEnqueue_(idsToLoad);\n  }\n  return deferredMap;\n};\n\n\n/**\n * Registers the callbacks and handles logic if it is a user initiated module\n * load.\n *\n * @param {string} id The id of the module to possibly load.\n * @param {!goog.module.ModuleInfo} moduleInfo The module identifier for the\n *     given id.\n * @param {boolean} userInitiated If the load was user initiated.\n * @param {!goog.async.Deferred} d A deferred object.\n * @private\n */\ngoog.module.ModuleManager.prototype.registerModuleLoadCallbacks_ = function(\n    id, moduleInfo, userInitiated, d) {\n  'use strict';\n  moduleInfo.registerCallback(d.callback, d);\n  moduleInfo.registerErrback(function(err) {\n    'use strict';\n    d.errback(new goog.module.ModuleManager.ModuleFailureError(id, err));\n  });\n  // If it's already loading, we don't have to do anything besides handle\n  // if it was user initiated\n  if (this.isModuleLoading(id)) {\n    if (userInitiated) {\n      goog.log.fine(\n          this.logger_, 'User initiated module already loading: ' + id);\n      this.addUserInitiatedLoadingModule_(id);\n      this.dispatchActiveIdleChangeIfNeeded_();\n    }\n  } else {\n    if (userInitiated) {\n      goog.log.fine(this.logger_, 'User initiated module load: ' + id);\n      this.addUserInitiatedLoadingModule_(id);\n    } else {\n      goog.log.fine(this.logger_, 'Initiating module load: ' + id);\n    }\n  }\n};\n\n\n/**\n * Initiates loading of a list of modules or, if a module is currently being\n * loaded, appends the modules to the queue of requested module ids.\n *\n * The caller should verify that the requested modules are not already loaded or\n * loading. {@link #loadModulesOrEnqueueIfNotLoadedOrLoading_} is a more lenient\n * alternative to this method.\n *\n * @param {!Array<string>} ids The ids of the modules to load.\n * @private\n */\ngoog.module.ModuleManager.prototype.loadModulesOrEnqueue_ = function(ids) {\n  'use strict';\n  // With concurrent loading we always just send off the request.\n  if (this.concurrentLoadingEnabled_) {\n    // For now we wait for initial modules to have downloaded as this puts the\n    // loader in a good state for calculating the needed deps of additional\n    // loads.\n    // TODO(malteubl): Make this wait unnecessary.\n    this.initialModulesLoaded_.addCallback(\n        goog.bind(this.loadModules_, this, ids));\n  } else {\n    if (goog.array.isEmpty(this.loadingModuleIds_)) {\n      this.loadModules_(ids);\n    } else {\n      this.requestedModuleIdsQueue_.push(ids);\n      this.dispatchActiveIdleChangeIfNeeded_();\n    }\n  }\n};\n\n\n/**\n * Gets the amount of delay to wait before sending a request for more modules.\n * If a certain module request fails, we backoff a little bit and try again.\n * @return {number} Delay, in ms.\n * @private\n */\ngoog.module.ModuleManager.prototype.getBackOff_ = function() {\n  'use strict';\n  // 5 seconds after one error, 20 seconds after 2.\n  return Math.pow(this.consecutiveFailures_, 2) * 5000;\n};\n\n\n/**\n * Loads a list of modules and any of their not-yet-loaded prerequisites.\n * If batch mode is enabled, the prerequisites will be loaded together with the\n * requested modules and all requested modules will be loaded at the same time.\n *\n * The caller should verify that the requested modules are not already loaded\n * and that no modules are currently loading before calling this method.\n *\n * @param {!Array<string>} ids The ids of the modules to load.\n * @param {boolean=} opt_isRetry If the load is a retry of a previous load\n *     attempt.\n * @param {boolean=} opt_forceReload Whether to bypass cache while loading the\n *     module.\n * @private\n */\ngoog.module.ModuleManager.prototype.loadModules_ = function(\n    ids, opt_isRetry, opt_forceReload) {\n  'use strict';\n  if (!opt_isRetry) {\n    this.consecutiveFailures_ = 0;\n  }\n\n  // Not all modules may be loaded immediately if batch mode is not enabled.\n  var idsToLoadImmediately = this.processModulesForLoad_(ids);\n\n  goog.log.fine(this.logger_, 'Loading module(s): ' + idsToLoadImmediately);\n\n  if (this.concurrentLoadingEnabled_) {\n    goog.array.extend(this.loadingModuleIds_, idsToLoadImmediately);\n  } else {\n    this.loadingModuleIds_ = idsToLoadImmediately;\n  }\n\n  if (this.batchModeEnabled_) {\n    this.requestedLoadingModuleIds_ = ids;\n  } else {\n    // If batch mode is disabled, we treat each dependency load as a separate\n    // load.\n    this.requestedLoadingModuleIds_ = goog.array.clone(idsToLoadImmediately);\n  }\n\n  // Dispatch an active/idle change if needed.\n  this.dispatchActiveIdleChangeIfNeeded_();\n\n  if (goog.array.isEmpty(idsToLoadImmediately)) {\n    // All requested modules and deps have been either loaded already or have\n    // already been requested.\n    return;\n  }\n\n  this.requestedModuleIds_.push.apply(\n      this.requestedModuleIds_, idsToLoadImmediately);\n\n  var loadFn = goog.bind(\n      this.getLoader().loadModules, goog.asserts.assert(this.getLoader()),\n      goog.array.clone(idsToLoadImmediately),\n      goog.asserts.assert(this.moduleInfoMap), {\n        extraEdges: this.extraEdges_,\n        forceReload: !!opt_forceReload,\n        onError: goog.bind(\n            this.handleLoadError_, this, this.requestedLoadingModuleIds_,\n            idsToLoadImmediately),\n        onTimeout: goog.bind(this.handleLoadTimeout_, this),\n      });\n\n  var delay = this.getBackOff_();\n  if (delay) {\n    window.setTimeout(loadFn, delay);\n  } else {\n    loadFn();\n  }\n};\n\n\n/**\n * Processes a list of module ids for loading. Checks if any of the modules are\n * already loaded and then gets transitive deps. Queues any necessary modules\n * if batch mode is not enabled. Returns the list of ids that should be loaded.\n *\n * @param {!Array<string>} ids The ids that need to be loaded.\n * @return {!Array<string>} The ids to load, including dependencies.\n * @throws {!Error} If the module is already loaded.\n * @private\n */\ngoog.module.ModuleManager.prototype.processModulesForLoad_ = function(ids) {\n  'use strict';\n  ids = goog.array.filter(ids, (id) => {\n    let moduleInfo = this.moduleInfoMap[id];\n    if (moduleInfo.isLoaded()) {\n      goog.global.setTimeout(\n          () => new Error('Module already loaded: ' + id), 0);\n      return false;\n    }\n    return true;\n  });\n\n  // Build a list of the ids of this module and any of its not-yet-loaded\n  // prerequisite modules in dependency order.\n  var idsWithDeps = [];\n  for (var i = 0; i < ids.length; i++) {\n    idsWithDeps =\n        idsWithDeps.concat(this.getNotYetLoadedTransitiveDepIds_(ids[i]));\n  }\n  goog.array.removeDuplicates(idsWithDeps);\n\n  if (!this.batchModeEnabled_ && idsWithDeps.length > 1) {\n    var idToLoad = idsWithDeps.shift();\n    goog.log.fine(\n        this.logger_, 'Must load ' + idToLoad + ' module before ' + ids);\n\n    // Insert the requested module id and any other not-yet-loaded prereqs\n    // that it has at the front of the queue.\n    var queuedModules = goog.array.map(idsWithDeps, function(id) {\n      'use strict';\n      return [id];\n    });\n    this.requestedModuleIdsQueue_ =\n        queuedModules.concat(this.requestedModuleIdsQueue_);\n    return [idToLoad];\n  } else {\n    return idsWithDeps;\n  }\n};\n\n\n/**\n * Builds a list of the ids of the not-yet-loaded modules that a particular\n * module transitively depends on, including itself.\n *\n * @param {string} id The id of a not-yet-loaded module.\n * @return {!Array<string>} An array of module ids in dependency order that's\n *     guaranteed to end with the provided module id.\n * @private\n */\ngoog.module.ModuleManager.prototype.getNotYetLoadedTransitiveDepIds_ = function(\n    id) {\n  'use strict';\n  var requestedModuleSet = goog.object.createSet(this.requestedModuleIds_);\n  // NOTE(user): We want the earliest occurrence of a module, not the first\n  // dependency we find. Therefore we strip duplicates at the end rather than\n  // during.  See the tests for concrete examples.\n  var ids = [];\n  if (!requestedModuleSet[id]) {\n    ids.push(id);\n  }\n  var depIdLookupList = [id];\n  // BFS by iterating through dependencies and enqueuing their respective\n  // dependencies into the lookup list.\n  for (var i = 0; i < depIdLookupList.length; i++) {\n    var depIds = this.getModuleInfo(depIdLookupList[i]).getDependencies();\n    for (var j = depIds.length - 1; j >= 0; j--) {\n      var depId = depIds[j];\n      if (!this.getModuleInfo(depId).isLoaded() && !requestedModuleSet[depId]) {\n        ids.push(depId);\n        depIdLookupList.push(depId);\n      }\n    }\n  }\n\n  // Leaf dependencies should come before others. Please refer to test cases for\n  // exact order.\n  ids.reverse();\n  goog.array.removeDuplicates(ids);\n  return ids;\n};\n\n\n/**\n * If we are still loading the base module, consider the load complete.\n * @private\n */\ngoog.module.ModuleManager.prototype.maybeFinishBaseLoad_ = function() {\n  'use strict';\n  if (this.currentlyLoadingModule_ == this.baseModuleInfo_) {\n    this.currentlyLoadingModule_ = null;\n    var error =\n        this.baseModuleInfo_.onLoad(goog.bind(this.getModuleContext, this));\n    if (error) {\n      this.dispatchModuleLoadFailed_(\n          goog.loader.AbstractModuleManager.FailureType.INIT_ERROR);\n    }\n\n    this.dispatchActiveIdleChangeIfNeeded_();\n  }\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setLoaded = function() {\n  'use strict';\n  if (!this.currentlyLoadingModule_) {\n    goog.log.error(\n        this.logger_, 'setLoaded called while no module is actively loading');\n    return;\n  }\n\n  var id = this.currentlyLoadingModule_.getId();\n\n  if (this.isDisposed()) {\n    goog.log.warning(\n        this.logger_, 'Module loaded after module manager was disposed: ' + id);\n    return;\n  }\n\n  goog.log.fine(this.logger_, 'Module loaded: ' + id);\n\n  var error =\n      this.moduleInfoMap[id].onLoad(goog.bind(this.getModuleContext, this));\n  if (error) {\n    this.dispatchModuleLoadFailed_(\n        goog.loader.AbstractModuleManager.FailureType.INIT_ERROR);\n  }\n\n  // Remove the module id from the user initiated set if it existed there.\n  goog.array.remove(this.userInitiatedLoadingModuleIds_, id);\n\n  // Remove the module id from the loading modules if it exists there.\n  goog.array.remove(this.loadingModuleIds_, id);\n\n  if (goog.array.isEmpty(this.loadingModuleIds_)) {\n    // No more modules are currently being loaded (e.g. arriving later in the\n    // same HTTP response), so proceed to load the next module in the queue.\n    this.loadNextModules_();\n  }\n\n  if (this.lastInitialModuleId_ && id == this.lastInitialModuleId_) {\n    if (!this.initialModulesLoaded_.hasFired()) {\n      this.initialModulesLoaded_.callback();\n    }\n  }\n\n  // Dispatch an active/idle change if needed.\n  this.dispatchActiveIdleChangeIfNeeded_();\n\n  this.currentlyLoadingModule_ = null;\n  goog.debug.Trace.stopTracer(this.loadTracer_);\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.isModuleLoading = function(id) {\n  'use strict';\n  if (goog.array.contains(this.loadingModuleIds_, id)) {\n    return true;\n  }\n  for (var i = 0; i < this.requestedModuleIdsQueue_.length; i++) {\n    if (goog.array.contains(this.requestedModuleIdsQueue_[i], id)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.execOnLoad = function(\n    moduleId, fn, opt_handler, opt_noLoad, opt_userInitiated,\n    opt_preferSynchronous) {\n  'use strict';\n  var moduleInfo = this.moduleInfoMap[moduleId];\n  var callbackWrapper;\n\n  if (moduleInfo.isLoaded()) {\n    goog.log.fine(this.logger_, moduleId + ' module already loaded');\n    // Call async so that code paths don't change between loaded and unloaded\n    // cases.\n    callbackWrapper = new goog.module.ModuleLoadCallback(fn, opt_handler);\n    if (opt_preferSynchronous) {\n      callbackWrapper.execute(this.getModuleContext());\n    } else {\n      window.setTimeout(goog.bind(callbackWrapper.execute, callbackWrapper), 0);\n    }\n  } else if (this.isModuleLoading(moduleId)) {\n    goog.log.fine(this.logger_, moduleId + ' module already loading');\n    callbackWrapper = moduleInfo.registerCallback(fn, opt_handler);\n    if (opt_userInitiated) {\n      goog.log.fine(\n          this.logger_, 'User initiated module already loading: ' + moduleId);\n      this.addUserInitiatedLoadingModule_(moduleId);\n      this.dispatchActiveIdleChangeIfNeeded_();\n    }\n  } else {\n    goog.log.fine(this.logger_, 'Registering callback for module: ' + moduleId);\n    callbackWrapper = moduleInfo.registerCallback(fn, opt_handler);\n    if (!opt_noLoad) {\n      if (opt_userInitiated) {\n        goog.log.fine(this.logger_, 'User initiated module load: ' + moduleId);\n        this.addUserInitiatedLoadingModule_(moduleId);\n      }\n      goog.log.fine(this.logger_, 'Initiating module load: ' + moduleId);\n      this.loadModulesOrEnqueue_([moduleId]);\n    }\n  }\n  return callbackWrapper;\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.load = function(\n    moduleId, opt_userInitiated) {\n  'use strict';\n  return this.loadModulesOrEnqueueIfNotLoadedOrLoading_(\n      [moduleId], opt_userInitiated)[moduleId];\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.loadMultiple = function(\n    moduleIds, opt_userInitiated) {\n  'use strict';\n  return this.loadModulesOrEnqueueIfNotLoadedOrLoading_(\n      moduleIds, opt_userInitiated);\n};\n\n\n/**\n * Ensures that the module with the given id is listed as a user-initiated\n * module that is being loaded. This method guarantees that a module will never\n * get listed more than once.\n * @param {string} id Identifier of the module.\n * @private\n */\ngoog.module.ModuleManager.prototype.addUserInitiatedLoadingModule_ = function(\n    id) {\n  'use strict';\n  if (!goog.array.contains(this.userInitiatedLoadingModuleIds_, id)) {\n    this.userInitiatedLoadingModuleIds_.push(id);\n  }\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.beforeLoadModuleCode = function(id) {\n  'use strict';\n  this.loadTracer_ =\n      goog.debug.Trace.startTracer('Module Load: ' + id, 'Module Load');\n  if (this.currentlyLoadingModule_) {\n    goog.log.error(\n        this.logger_,\n        'beforeLoadModuleCode called with module \"' + id + '\" while module \"' +\n            this.currentlyLoadingModule_.getId() + '\" is loading');\n  }\n  this.currentlyLoadingModule_ = this.getModuleInfo(id);\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.registerInitializationCallback = function(\n    fn, opt_handler) {\n  'use strict';\n  if (!this.currentlyLoadingModule_) {\n    goog.log.error(this.logger_, 'No module is currently loading');\n  } else {\n    this.currentlyLoadingModule_.registerEarlyCallback(fn, opt_handler);\n  }\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.registerLateInitializationCallback =\n    function(fn, opt_handler) {\n  'use strict';\n  if (!this.currentlyLoadingModule_) {\n    goog.log.error(this.logger_, 'No module is currently loading');\n  } else {\n    this.currentlyLoadingModule_.registerCallback(fn, opt_handler);\n  }\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.setModuleConstructor = function(fn) {\n  'use strict';\n  if (!this.currentlyLoadingModule_) {\n    goog.log.error(this.logger_, 'No module is currently loading');\n    return;\n  }\n  this.currentlyLoadingModule_.setModuleConstructor(fn);\n};\n\n\n/**\n * Handles a module load failure.\n *\n * @param {!Array<string>} requestedLoadingModuleIds Modules ids that were\n *     requested in failed request. Does not included calculated dependencies.\n * @param {!Array<string>} requestedModuleIdsWithDeps All module ids requested\n *     in the failed request including all dependencies.\n * @param {?number} status The error status.\n * @private\n */\ngoog.module.ModuleManager.prototype.handleLoadError_ = function(\n    requestedLoadingModuleIds, requestedModuleIdsWithDeps, status) {\n  'use strict';\n  this.consecutiveFailures_++;\n  // Module manager was not designed to be reentrant. Reinstate the instance\n  // var with actual value when request failed (Other requests may have\n  // started already.)\n  this.requestedLoadingModuleIds_ = requestedLoadingModuleIds;\n  // Pretend we never requested the failed modules.\n  goog.array.forEach(\n      requestedModuleIdsWithDeps,\n      goog.partial(goog.array.remove, this.requestedModuleIds_), this);\n\n  if (status == 401) {\n    // The user is not logged in. They've cleared their cookies or logged out\n    // from another window.\n    goog.log.info(this.logger_, 'Module loading unauthorized');\n    this.dispatchModuleLoadFailed_(\n        goog.loader.AbstractModuleManager.FailureType.UNAUTHORIZED);\n    // Drop any additional module requests.\n    this.requestedModuleIdsQueue_.length = 0;\n  } else if (status == 410) {\n    // The requested module js is old and not available.\n    this.requeueBatchOrDispatchFailure_(\n        goog.loader.AbstractModuleManager.FailureType.OLD_CODE_GONE);\n    this.loadNextModules_();\n  } else if (this.consecutiveFailures_ >= 3) {\n    goog.log.info(\n        this.logger_,\n        'Aborting after failure to load: ' + this.loadingModuleIds_);\n    this.requeueBatchOrDispatchFailure_(\n        goog.loader.AbstractModuleManager.FailureType.CONSECUTIVE_FAILURES);\n    this.loadNextModules_();\n  } else {\n    goog.log.info(\n        this.logger_,\n        'Retrying after failure to load: ' + this.loadingModuleIds_);\n    var forceReload = status ==\n        goog.loader.AbstractModuleManager.CORRUPT_RESPONSE_STATUS_CODE;\n    this.loadModules_(this.requestedLoadingModuleIds_, true, forceReload);\n  }\n};\n\n\n/**\n * Handles a module load timeout.\n * @private\n */\ngoog.module.ModuleManager.prototype.handleLoadTimeout_ = function() {\n  'use strict';\n  goog.log.info(\n      this.logger_, 'Aborting after timeout: ' + this.loadingModuleIds_);\n  this.requeueBatchOrDispatchFailure_(\n      goog.loader.AbstractModuleManager.FailureType.TIMEOUT);\n  this.loadNextModules_();\n};\n\n\n/**\n * Requeues batch loads that had more than one requested module\n * (i.e. modules that were not included as dependencies) as separate loads or\n * if there was only one requested module, fails that module with the received\n * cause.\n * @param {!goog.loader.AbstractModuleManager.FailureType} cause The reason for\n *     the failure.\n * @private\n */\ngoog.module.ModuleManager.prototype.requeueBatchOrDispatchFailure_ = function(\n    cause) {\n  'use strict';\n  // The load failed, so if there are more than one requested modules, then we\n  // need to retry each one as a separate load. Otherwise, if there is only one\n  // requested module, remove it and its dependencies from the queue.\n  if (this.requestedLoadingModuleIds_.length > 1) {\n    var queuedModules =\n        goog.array.map(this.requestedLoadingModuleIds_, function(id) {\n          'use strict';\n          return [id];\n        });\n    this.requestedModuleIdsQueue_ =\n        queuedModules.concat(this.requestedModuleIdsQueue_);\n  } else {\n    this.dispatchModuleLoadFailed_(cause);\n  }\n};\n\n\n/**\n * Handles when a module load failed.\n * @param {!goog.loader.AbstractModuleManager.FailureType} cause The reason for\n *     the failure.\n * @private\n */\ngoog.module.ModuleManager.prototype.dispatchModuleLoadFailed_ = function(\n    cause) {\n  'use strict';\n  var failedIds = this.requestedLoadingModuleIds_;\n  this.loadingModuleIds_.length = 0;\n  // If any pending modules depend on the id that failed,\n  // they need to be removed from the queue.\n  var idsToCancel = [];\n  for (var i = 0; i < this.requestedModuleIdsQueue_.length; i++) {\n    var dependentModules = goog.array.filter(\n        this.requestedModuleIdsQueue_[i],\n        /**\n         * Returns true if the requestedId has dependencies on the modules that\n         * just failed to load.\n         * @param {string} requestedId The module to check for dependencies.\n         * @return {boolean} True if the module depends on failed modules.\n         */\n        function(requestedId) {\n          'use strict';\n          var requestedDeps =\n              this.getNotYetLoadedTransitiveDepIds_(requestedId);\n          return goog.array.some(failedIds, function(id) {\n            'use strict';\n            return goog.array.contains(requestedDeps, id);\n          });\n        },\n        this);\n    goog.array.extend(idsToCancel, dependentModules);\n  }\n\n  // Also insert the ids that failed to load as ids to cancel.\n  for (var i = 0; i < failedIds.length; i++) {\n    goog.array.insert(idsToCancel, failedIds[i]);\n  }\n\n  // Remove ids to cancel from the queues.\n  for (var i = 0; i < idsToCancel.length; i++) {\n    for (var j = 0; j < this.requestedModuleIdsQueue_.length; j++) {\n      goog.array.remove(this.requestedModuleIdsQueue_[j], idsToCancel[i]);\n    }\n    goog.array.remove(this.userInitiatedLoadingModuleIds_, idsToCancel[i]);\n  }\n\n  // Call the functions for error notification.\n  var errorCallbacks =\n      this.callbackMap_[goog.loader.AbstractModuleManager.CallbackType.ERROR];\n  if (errorCallbacks) {\n    for (var i = 0; i < errorCallbacks.length; i++) {\n      var callback = errorCallbacks[i];\n      for (var j = 0; j < idsToCancel.length; j++) {\n        callback(\n            goog.loader.AbstractModuleManager.CallbackType.ERROR,\n            idsToCancel[j], cause);\n      }\n    }\n  }\n\n  // Call the errbacks on the module info.\n  for (var i = 0; i < failedIds.length; i++) {\n    if (this.moduleInfoMap[failedIds[i]]) {\n      this.moduleInfoMap[failedIds[i]].onError(cause);\n    }\n  }\n\n  // Clear the requested loading module ids.\n  this.requestedLoadingModuleIds_.length = 0;\n\n  this.dispatchActiveIdleChangeIfNeeded_();\n};\n\n\n/**\n * Loads the next modules on the queue.\n * @private\n */\ngoog.module.ModuleManager.prototype.loadNextModules_ = function() {\n  'use strict';\n  while (this.requestedModuleIdsQueue_.length) {\n    // Remove modules that are already loaded.\n    var nextIds =\n        goog.array.filter(this.requestedModuleIdsQueue_.shift(), function(id) {\n          'use strict';\n          return !this.getModuleInfo(id).isLoaded();\n        }, this);\n    if (nextIds.length > 0) {\n      this.loadModules_(nextIds);\n      return;\n    }\n  }\n\n  // Dispatch an active/idle change if needed.\n  this.dispatchActiveIdleChangeIfNeeded_();\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.registerCallback = function(types, fn) {\n  'use strict';\n  if (!Array.isArray(types)) {\n    types = [types];\n  }\n\n  for (var i = 0; i < types.length; i++) {\n    this.registerCallback_(types[i], fn);\n  }\n};\n\n\n/**\n * Register a callback for the specified callback type.\n * @param {!goog.loader.AbstractModuleManager.CallbackType} type The callback\n *     type.\n * @param {!Function} fn The callback function.\n * @private\n */\ngoog.module.ModuleManager.prototype.registerCallback_ = function(type, fn) {\n  'use strict';\n  var callbackMap = this.callbackMap_;\n  if (!callbackMap[type]) {\n    callbackMap[type] = [];\n  }\n  callbackMap[type].push(fn);\n};\n\n\n/**\n * Call the callback functions of the specified type.\n * @param {!goog.loader.AbstractModuleManager.CallbackType} type The callback\n *     type.\n * @private\n */\ngoog.module.ModuleManager.prototype.executeCallbacks_ = function(type) {\n  'use strict';\n  var callbacks = this.callbackMap_[type];\n  for (var i = 0; callbacks && i < callbacks.length; i++) {\n    callbacks[i](type);\n  }\n};\n\n\n/** @override */\ngoog.module.ModuleManager.prototype.dispose = function() {\n  'use strict';\n  // Dispose of each ModuleInfo object.\n  goog.disposeAll(\n      goog.object.getValues(this.moduleInfoMap), this.baseModuleInfo_);\n  this.moduleInfoMap = {};\n  this.loadingModuleIds_ = [];\n  this.requestedLoadingModuleIds_ = [];\n  this.userInitiatedLoadingModuleIds_ = [];\n  this.requestedModuleIdsQueue_ = [];\n  this.callbackMap_ = {};\n  this.isDisposed_ = true;\n};\n\n/** @override */\ngoog.module.ModuleManager.prototype.isDisposed = function() {\n  'use strict';\n  return this.isDisposed_;\n};\n\ngoog.loader.activeModuleManager.setDefault(function() {\n  'use strict';\n  return new goog.module.ModuleManager();\n});\n"],
"names":["goog","provide","require","requireType","module","ModuleManager","goog.module.ModuleManager","base","moduleInfoMap","loadingModuleIds_","requestedLoadingModuleIds_","requestedModuleIds_","requestedModuleIdsQueue_","userInitiatedLoadingModuleIds_","extraEdges_","callbackMap_","baseModuleInfo_","ModuleInfo","currentlyLoadingModule_","lastInitialModuleId_","initialModulesLoaded_","async","Deferred","logger_","log","getLogger","batchModeEnabled_","concurrentLoadingEnabled_","loadTracer_","consecutiveFailures_","lastActive_","userLastActive_","isDisposed_","inherits","loader","AbstractModuleManager","ModuleFailureError","goog.module.ModuleManager.ModuleFailureError","moduleID","failureType","msg","ModuleLoadFailureType","getReadableError","debug","Error","CallbackType","FailureType","CORRUPT_RESPONSE_STATUS_CODE","getInstance","goog.module.ModuleManager.getInstance","activeModuleManager","get","prototype","setBatchModeEnabled","goog.module.ModuleManager.prototype.setBatchModeEnabled","enabled","setConcurrentLoadingEnabled","goog.module.ModuleManager.prototype.setConcurrentLoadingEnabled","setAllModuleInfo","goog.module.ModuleManager.prototype.setAllModuleInfo","infoMap","id","addOrUpdateModuleInfo_","hasFired","callback","maybeFinishBaseLoad_","setAllModuleInfoString","goog.module.ModuleManager.prototype.setAllModuleInfoString","opt_info","opt_loadingModuleIds","modules","split","moduleIds","i","length","parts","deps","j","index","parseInt","asserts","assert","push","array","extend","peek","SUBTRACTIVE_MODULE_LOADING","define","getModuleInfo","goog.module.ModuleManager.prototype.getModuleInfo","addExtraEdge","goog.module.ModuleManager.prototype.addExtraEdge","fromModule","toModule","getLoader","supportsExtraEdges","removeExtraEdge","goog.module.ModuleManager.prototype.removeExtraEdge","setModuleTrustedUris","goog.module.ModuleManager.prototype.setModuleTrustedUris","moduleUriMap","setTrustedUris","setModuleContext","goog.module.ModuleManager.prototype.setModuleContext","context","isActive","goog.module.ModuleManager.prototype.isActive","isUserActive","goog.module.ModuleManager.prototype.isUserActive","dispatchActiveIdleChangeIfNeeded_","goog.module.ModuleManager.prototype.dispatchActiveIdleChangeIfNeeded_","lastActive","active","executeCallbacks_","ACTIVE","IDLE","userLastActive","userActive","USER_ACTIVE","USER_IDLE","preloadModule","goog.module.ModuleManager.prototype.preloadModule","opt_timeout","d","window","setTimeout","bind","addLoadModule_","prefetchModule","goog.module.ModuleManager.prototype.prefetchModule","moduleInfo","isLoaded","isModuleLoading","idWithDeps","getNotYetLoadedTransitiveDepIds_","goog.module.ModuleManager.prototype.addLoadModule_","getModuleContext","registerModuleLoadCallbacks_","loadModulesOrEnqueue_","goog.module.ModuleManager.prototype.addOrUpdateModuleInfo_","moduleDeps","getDependencies","splice","loadModulesOrEnqueueIfNotLoadedOrLoading_","goog.module.ModuleManager.prototype.loadModulesOrEnqueueIfNotLoadedOrLoading_","ids","opt_userInitiated","uniqueIds","removeDuplicates","idsToLoad","deferredMap","goog.module.ModuleManager.prototype.registerModuleLoadCallbacks_","userInitiated","registerCallback","registerErrback","err","errback","fine","addUserInitiatedLoadingModule_","goog.module.ModuleManager.prototype.loadModulesOrEnqueue_","addCallback","loadModules_","isEmpty","getBackOff_","goog.module.ModuleManager.prototype.getBackOff_","Math","pow","goog.module.ModuleManager.prototype.loadModules_","opt_isRetry","opt_forceReload","idsToLoadImmediately","processModulesForLoad_","clone","apply","loadFn","loadModules","extraEdges","forceReload","onError","handleLoadError_","onTimeout","handleLoadTimeout_","delay","goog.module.ModuleManager.prototype.processModulesForLoad_","filter","global","idsWithDeps","concat","idToLoad","shift","queuedModules","map","goog.module.ModuleManager.prototype.getNotYetLoadedTransitiveDepIds_","requestedModuleSet","object","createSet","depIdLookupList","depIds","depId","reverse","goog.module.ModuleManager.prototype.maybeFinishBaseLoad_","error","onLoad","dispatchModuleLoadFailed_","INIT_ERROR","setLoaded","goog.module.ModuleManager.prototype.setLoaded","getId","isDisposed","warning","remove","loadNextModules_","Trace","stopTracer","goog.module.ModuleManager.prototype.isModuleLoading","contains","execOnLoad","goog.module.ModuleManager.prototype.execOnLoad","moduleId","fn","opt_handler","opt_noLoad","opt_preferSynchronous","callbackWrapper","ModuleLoadCallback","execute","load","goog.module.ModuleManager.prototype.load","loadMultiple","goog.module.ModuleManager.prototype.loadMultiple","goog.module.ModuleManager.prototype.addUserInitiatedLoadingModule_","beforeLoadModuleCode","goog.module.ModuleManager.prototype.beforeLoadModuleCode","startTracer","registerInitializationCallback","goog.module.ModuleManager.prototype.registerInitializationCallback","registerEarlyCallback","registerLateInitializationCallback","goog.module.ModuleManager.prototype.registerLateInitializationCallback","setModuleConstructor","goog.module.ModuleManager.prototype.setModuleConstructor","goog.module.ModuleManager.prototype.handleLoadError_","requestedLoadingModuleIds","requestedModuleIdsWithDeps","status","forEach","partial","info","UNAUTHORIZED","requeueBatchOrDispatchFailure_","OLD_CODE_GONE","CONSECUTIVE_FAILURES","goog.module.ModuleManager.prototype.handleLoadTimeout_","TIMEOUT","goog.module.ModuleManager.prototype.requeueBatchOrDispatchFailure_","cause","goog.module.ModuleManager.prototype.dispatchModuleLoadFailed_","failedIds","idsToCancel","dependentModules","requestedId","requestedDeps","some","insert","errorCallbacks","ERROR","goog.module.ModuleManager.prototype.loadNextModules_","nextIds","goog.module.ModuleManager.prototype.registerCallback","types","Array","isArray","registerCallback_","goog.module.ModuleManager.prototype.registerCallback_","type","callbackMap","goog.module.ModuleManager.prototype.executeCallbacks_","callbacks","dispose","goog.module.ModuleManager.prototype.dispose","disposeAll","getValues","goog.module.ModuleManager.prototype.isDisposed","setDefault"]
}
